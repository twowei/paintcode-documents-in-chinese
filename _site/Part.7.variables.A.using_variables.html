<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.1.3
    Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    <title>变量</title>
    <meta name="description" content="">
    <link rel="canonical" href="http://localhost:4000/Part.7.variables.A.using_variables.html">
  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

</head>


  <body class="layout--page  变量">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

    <header class="masthead">
  <div class="wrap">
    
    
    
      
        <div class="site-title animated fadeIn"><a href="/">paintcode-documents-in-chinese</a></div>
      
      <p class="site-description animated fadeIn" itemprop="description"></p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article>
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title">变量</h1>
        
      </header>
      <div class="page-content">
        <h1 id="变量"><a href="/_cover.html">变量</a></h1>

<p>就跟颜色和渐变一样，变量也是一种可以在文件中使用的库项。</p>

<p><a href="https://youtu.be/c8vYN7-1wYY">▶️Viriables</a></p>

<p>变量可以是，数字、文字、布尔值（逻辑值）、位置、大小、矩形，甚者是颜色、阴影和渐变。你可以在画布中给你的形状连接变量。</p>

<p><img src="/images/variables1.png" alt="变量" /></p>

<p>举个例子，你可以创建一个叫 <code class="highlighter-rouge">'radius'</code> 的数字变量，然后将它连接到多个圆角矩形的圆角属性中。当你改变 <code class="highlighter-rouge">radius</code> 变量的值，它所连接的形状的圆角就会立即更新！</p>

<p>在画布生成的绘方法中，变量转换为方法参数。</p>

<h2 id="创建变量">创建变量</h2>

<p>要新建一个变量，只需要点击库中 <code class="highlighter-rouge">Variables</code> 标题左边的 <code class="highlighter-rouge">'+'</code> 按钮。紧接着选择你想要创建的变量的类型。</p>

<p><img src="/images/variables2.png" alt="变量" /></p>

<h2 id="修改变量">修改变量</h2>

<p>每当你新建了一个变量，会自动出现一个弹框。你也可以随时双击库中的变量来打开这个弹框。</p>

<p><img src="/images/variables4.png" alt="变量" /></p>

<p>你可以在这个编辑弹框里更改多个变量的属性，多数情况下都是编辑它的<strong>值</strong>和<strong>名字</strong>。</p>

<p>不同类型的变量有不同的编辑弹框，比如这是 <code class="highlighter-rouge">rectangle</code> 变量的：</p>

<p><img src="/images/variables5.png" alt="变量" /></p>

<p>这里的 <code class="highlighter-rouge">Usage</code> 属性会影响生成的代码。不过我们只是先提一下，后面再来解释它。</p>

<p>小技巧：你可以不打开编辑弹框的情况下就能编辑大多数变量的值。只需要用鼠标上下拖拽变量列表里数值框。</p>

<h2 id="连接变量到形状">连接变量到形状</h2>

<p>有几种可以连接变量到一些形状的属性的方式。第一种方式是，选中画布中的一个或多个形状，然后拖拽变量的连接点到检查器里形状的一个属性上。</p>

<p><img src="/images/connect_variable1.png" alt="连接变量" /></p>

<p>或者你也可以直接将一个连接点拖动到画布里的形状上，然后在出现的菜单里选择想要的属性。这个方法通常都比前面那种更方便，不过一次只能够给一个形状连接属性（相比之下，通过检查器来连接，你可以一次性连接一个变量到多个形状）。</p>

<p><img src="/images/connect_variable2.png" alt="连接变量" /></p>

<p>要注意，有些属性比如 <code class="highlighter-rouge">'Bezier'</code> 的控制点位置和一些组属性只能通过检查器来连接。</p>

<h2 id="连接指示按钮">连接指示按钮</h2>

<p>当你将一个变量连接到属性之后，通常会在检查器里出现一个连接指示按钮（这个按钮代替了原来的属性文本输入框）。在下面的例子中，我们将一个变量连接到了一个圆角矩形的圆角半径上。</p>

<p><img src="/images/connection_button.png" alt="连接指示按钮" /></p>

<p>当你点击连接指示按钮，会出现一个相关弹框。</p>

<p><img src="/images/connection_button_popover.png" alt="连接按钮弹框" /></p>

<p>你可以在这个弹框里设置偏移量 —— 一个当变量被该属性使用时应该添加到该变量值中的值。这个自定义的变量偏移可以大大地减少文件中需要创建的变量数。另外，如果有必要的话，你开可以通过这个连接指示按钮，来将属性切换成另一个变量。</p>

<h2 id="取消一个属性的变量连接">取消一个属性的变量连接</h2>

<p>要从一个属性中取消变量的连接很容易，只需要点击连接指示按钮上带 <code class="highlighter-rouge">'X'</code> 图标的紫色圆形按钮。</p>

<p>当你取消了变量的连接，连接指示按钮就会被换成原先的文字输入框：</p>

<p><img src="/images/connection_button_disconnected.png" alt="取消连接" /></p>

<h2 id="通过使用变量来控制一个形状的可见性">通过使用变量来控制一个形状的可见性</h2>

<p>你可以使用一个布尔变量来控制一个形状的显示和隐藏。在形状的检查器里，在名字输入框正下方是一个可以控制形状的可见性的弹出按钮。</p>

<p><img src="/images/visibility.png" alt="可见性" /></p>

<p>点击它后会弹出一个菜单，上面会列出你 PaintCode 文件里所有的布尔值变量。</p>

<p><img src="/images/visibility_popup.png" alt="布尔值" /></p>

<p>在上面的例子里，我们的文件里包含了一个叫 <code class="highlighter-rouge">'isPressed'</code> 的布尔值变量。通过选择 <code class="highlighter-rouge">'Visible  if isPressed'</code> 选项，我们就可以确保当 <code class="highlighter-rouge">'isPressed'</code> 变量为真时，形状才可见。</p>

<h2 id="在画布中显示的变量">在画布中显示的变量</h2>

<p>当你创建了一个 <code class="highlighter-rouge">'point'</code> 或 <code class="highlighter-rouge">'rectangle'</code> 变量，然后将它连接到画布中的一些形状里，那么变量本身也会现在是在画布上，用紫色表示。</p>

<p><img src="/images/variables_in_canvas.png" alt="画布中的变量" /></p>

<p>对于 <code class="highlighter-rouge">'point'</code>，它是一个你可以随意拖动的小小的靶子图标 —— <code class="highlighter-rouge">'point'</code> 变量的值会相应地改变。<code class="highlighter-rouge">'rectangle'</code> 变量也是类似的。</p>

<p>这里举个例子，当你创建了一个代表鼠标指针的 <code class="highlighter-rouge">'point'</code> 变量时，这个功能就很有用了。你可以通过表达式来创建许多依赖于 <code class="highlighter-rouge">'point'</code> 变量的变量，然后只需要拖动这个<code class="highlighter-rouge">'point'</code> 变量，你就可以轻松地测试目标行为。</p>

<p>你可以在菜单栏中选择 <code class="highlighter-rouge">'Canvas ▸ Show Variables'</code> 来关闭或打开这个功能。</p>

<p><img src="/images/variables_in_canvas2.png" alt="画布中的比昂亮" /></p>

<h2 id="变量与代码生成">变量与代码生成</h2>

<p>在由画布生成的绘方法中，变量会转换成参数：</p>

<pre><code class="language-objective-c">- (void)drawRateButtonWithRadius: (CGFloat)radius title: (NSString*)title pressed: (BOOL)pressed;
</code></pre>

<p>除非你在变量设置弹框中将变量设置成本地的。注意，表达式变量都是本地的。</p>

<p><img src="/images/variables_codegen.png" alt="变量" /></p>

<h2 id="表达式">表达式</h2>

<p>你可以在在 PaintCode 中创建一个特殊类型的变量 —— 表达式。这种变量可以通过 数学和逻辑表达式来定义它的值。它们可以依赖于其它变量甚至其它库项（比如颜色）。</p>

<p><img src="/images/expressions1.png" alt="表达式" /></p>

<p>我们实际上在 PaintCode 中添加了一个很小巧的编程语言。它是一个 <code class="highlighter-rouge">C</code> 和 <code class="highlighter-rouge">JavaScript</code> 的子集，并且非常容易使用。</p>

<p>通过表达式变量，你可以创建真正复杂的动态绘图，甚至是游戏中的动画形象。</p>

<p><img src="/images/expressions2.png" alt="表达式" /></p>

<p>当你的表达式里出现黄色的底色，就意味着它出错了。你可以通过点击表达式里的黄色部分，或者编辑弹框左下角的警示三角形。</p>

<p><img src="/images/expressions3.png" alt="表达式" /></p>

<p>表达式不仅限于数字 —— 你可以使用逻辑运算符，比如<code class="highlighter-rouge">'C'</code>里很流行的 <code class="highlighter-rouge">'?:'</code> 三元运算符，你甚至可以从库中引用颜色来创建新的颜色。</p>

<p>重要：库项（比如颜色）的名字中如果含有空格是不合语法的。</p>

<p>不过，如果你想要在表达式中通过库项的名字来引用它，你需要去掉空格，将每个单词首字母大写，第一个字母小写。比如，如果你库里面有个叫 <code class="highlighter-rouge">'My Red Color'</code> 的颜色，你可以写成 <code class="highlighter-rouge">'myRedColor'</code> 来在表达式中引用它。</p>

<p>要了解更多关于 PaintCode 表达式语言，请到下一节。</p>


        
      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
<div class="copyright">
    
      <p>&copy; 2019 paintcode-documents-in-chinese. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>


  </body>

</html>
